11:54:13 [INFO] Blackbox logging enabled -> logs/bridge.blackbox.log
11:54:13 [INFO] Starting bridge ... UDP -> 127.0.0.1:5001 | MQTT topic=mission/drone/1/command
11:54:13 [INFO] Connected to MQTT localhost:1888
11:54:13 [INFO] Subscribed to topic: mission/drone/1/command
[2025-11-08 11:54:18] Status: recv=0 valid=0 invalid=0 sent=0 errors=0 reconnects=0
[2025-11-08 11:54:23] Status: recv=0 valid=0 invalid=0 sent=0 errors=0 reconnects=0
[2025-11-08 11:54:28] Status: recv=0 valid=0 invalid=0 sent=0 errors=0 reconnects=0
[2025-11-08 11:54:33] Status: recv=0 valid=0 invalid=0 sent=0 errors=0 reconnects=0
[2025-11-08 11:54:38] Status: recv=0 valid=0 invalid=0 sent=0 errors=0 reconnects=0
11:54:39 [DEBUG] MQTT message on mission/drone/1/command: {"cmd":"arm"}
11:54:39 [INFO] Forwarded to drone: {'ts_ms': 1762588479403, 'cmd': 'arm', 'params': {}}
[2025-11-08 11:54:43] Status: recv=1 valid=1 invalid=0 sent=1 errors=0 reconnects=0
11:54:43 [DEBUG] MQTT message on mission/drone/1/command: {"cmd":"takeoff","alt":30.0}
11:54:43 [INFO] Forwarded to drone: {'ts_ms': 1762588483646, 'cmd': 'takeoff', 'params': {'alt': 30.0}}
[2025-11-08 11:54:48] Status: recv=2 valid=2 invalid=0 sent=2 errors=0 reconnects=0
11:54:49 [DEBUG] MQTT message on mission/drone/1/command: {"cmd":"goto","lat":40.2340,"lon":111.6590,"alt":50.0}
11:54:49 [INFO] Forwarded to drone: {'ts_ms': 1762588489241, 'cmd': 'goto', 'params': {'lat': 40.234, 'lon': 111.659, 'alt': 50.0}}
[2025-11-08 11:54:53] Status: recv=3 valid=3 invalid=0 sent=3 errors=0 reconnects=0
11:54:54 [DEBUG] MQTT message on mission/drone/1/command: {"cmd":"land"}
11:54:54 [INFO] Forwarded to drone: {'ts_ms': 1762588494524, 'cmd': 'land', 'params': {}}
[2025-11-08 11:54:58] Status: recv=4 valid=4 invalid=0 sent=4 errors=0 reconnects=0
11:54:58 [DEBUG] MQTT message on mission/drone/1/command: {"cmd":"disarm"}
11:54:58 [INFO] Forwarded to drone: {'ts_ms': 1762588498318, 'cmd': 'disarm', 'params': {}}
[2025-11-08 11:55:03] Status: recv=5 valid=5 invalid=0 sent=5 errors=0 reconnects=0
[2025-11-08 11:55:08] Status: recv=5 valid=5 invalid=0 sent=5 errors=0 reconnects=0
[2025-11-08 11:55:13] Status: recv=5 valid=5 invalid=0 sent=5 errors=0 reconnects=0
[2025-11-08 11:55:18] Status: recv=5 valid=5 invalid=0 sent=5 errors=0 reconnects=0
[2025-11-08 11:55:23] Status: recv=5 valid=5 invalid=0 sent=5 errors=0 reconnects=0
[2025-11-08 11:55:28] Status: recv=5 valid=5 invalid=0 sent=5 errors=0 reconnects=0
11:55:32 [DEBUG] MQTT message on mission/drone/1/command: {"cmd":"arm"}
11:55:32 [INFO] Forwarded to drone: {'ts_ms': 1762588532937, 'cmd': 'arm', 'params': {}}
[2025-11-08 11:55:33] Status: recv=6 valid=6 invalid=0 sent=6 errors=0 reconnects=0
11:55:36 [DEBUG] MQTT message on mission/drone/1/command: {"cmd":"takeoff","alt":30.0}
11:55:36 [INFO] Forwarded to drone: {'ts_ms': 1762588536222, 'cmd': 'takeoff', 'params': {'alt': 30.0}}
[2025-11-08 11:55:38] Status: recv=7 valid=7 invalid=0 sent=7 errors=0 reconnects=0
11:55:39 [DEBUG] MQTT message on mission/drone/1/command: {"cmd":"goto","lat":40.2340,"lon":111.6590,"alt":50.0}
11:55:39 [INFO] Forwarded to drone: {'ts_ms': 1762588539466, 'cmd': 'goto', 'params': {'lat': 40.234, 'lon': 111.659, 'alt': 50.0}}
11:55:42 [DEBUG] MQTT message on mission/drone/1/command: {"cmd":"land"}
11:55:42 [INFO] Forwarded to drone: {'ts_ms': 1762588542934, 'cmd': 'land', 'params': {}}
[2025-11-08 11:55:43] Status: recv=9 valid=9 invalid=0 sent=9 errors=0 reconnects=0
11:55:45 [DEBUG] MQTT message on mission/drone/1/command: {"cmd":"disarm"}
11:55:45 [INFO] Forwarded to drone: {'ts_ms': 1762588545199, 'cmd': 'disarm', 'params': {}}
[2025-11-08 11:55:48] Status: recv=10 valid=10 invalid=0 sent=10 errors=0 reconnects=0
[2025-11-08 11:55:53] Status: recv=10 valid=10 invalid=0 sent=10 errors=0 reconnects=0
[2025-11-08 11:55:58] Status: recv=10 valid=10 invalid=0 sent=10 errors=0 reconnects=0
[2025-11-08 11:56:03] Status: recv=10 valid=10 invalid=0 sent=10 errors=0 reconnects=0
11:56:05 [DEBUG] MQTT message on mission/drone/1/command: {"cmd":"arm"}
11:56:05 [INFO] Forwarded to drone: {'ts_ms': 1762588565573, 'cmd': 'arm', 'params': {}}
[2025-11-08 11:56:08] Status: recv=11 valid=11 invalid=0 sent=11 errors=0 reconnects=0
11:56:11 [DEBUG] MQTT message on mission/drone/1/command: {"cmd":"takeoff","alt":30.0}
11:56:11 [INFO] Forwarded to drone: {'ts_ms': 1762588571091, 'cmd': 'takeoff', 'params': {'alt': 30.0}}
[2025-11-08 11:56:13] Status: recv=12 valid=12 invalid=0 sent=12 errors=0 reconnects=0
[2025-11-08 11:56:18] Status: recv=12 valid=12 invalid=0 sent=12 errors=0 reconnects=0
[2025-11-08 11:56:23] Status: recv=12 valid=12 invalid=0 sent=12 errors=0 reconnects=0
11:56:23 [DEBUG] MQTT message on mission/drone/1/command: {"cmd":"goto","lat":40.2340,"lon":111.6590,"alt":150.0}
11:56:23 [WARNING] Invalid command: goto - goto.alt 150.0m outside [10, 120]m
[2025-11-08 11:56:28] Status: recv=13 valid=12 invalid=1 sent=12 errors=0 reconnects=0
11:56:30 [DEBUG] MQTT message on mission/drone/1/command: {"cmd":"goto","lat":40.9999,"lon":111.6590,"alt":50.0}
11:56:30 [WARNING] Invalid command: goto - goto target 85186.4m outside geofence radius 500m
[2025-11-08 11:56:33] Status: recv=14 valid=12 invalid=2 sent=12 errors=0 reconnects=0
11:56:33 [DEBUG] MQTT message on mission/drone/1/command: {"cmd":"land"}
11:56:33 [INFO] Forwarded to drone: {'ts_ms': 1762588593533, 'cmd': 'land', 'params': {}}
11:56:37 [DEBUG] MQTT message on mission/drone/1/command: {"cmd":"disarm"}
11:56:37 [INFO] Forwarded to drone: {'ts_ms': 1762588597004, 'cmd': 'disarm', 'params': {}}
[2025-11-08 11:56:38] Status: recv=16 valid=14 invalid=2 sent=14 errors=0 reconnects=0
11:56:41 [DEBUG] MQTT message on mission/drone/1/command: {"cmd":"takeoff","alt":30.0}
11:56:41 [WARNING] Invalid command: takeoff - sequence violation: must arm first
[2025-11-08 11:56:43] Status: recv=17 valid=14 invalid=3 sent=14 errors=0 reconnects=0
11:56:47 [DEBUG] MQTT message on mission/drone/1/command: {"cmd":"arm"}
11:56:47 [INFO] Forwarded to drone: {'ts_ms': 1762588607045, 'cmd': 'arm', 'params': {}}
[2025-11-08 11:56:48] Status: recv=18 valid=15 invalid=3 sent=15 errors=0 reconnects=0
11:56:52 [DEBUG] MQTT message on mission/drone/1/command: {"cmd":"takeoff","alt":30.0}
11:56:52 [INFO] Forwarded to drone: {'ts_ms': 1762588612293, 'cmd': 'takeoff', 'params': {'alt': 30.0}}
[2025-11-08 11:56:53] Status: recv=19 valid=16 invalid=3 sent=16 errors=0 reconnects=0
11:56:55 [DEBUG] MQTT message on mission/drone/1/command: {"cmd":"disarm"}
11:56:55 [WARNING] Invalid command: disarm - sequence violation: must land before disarm
[2025-11-08 11:56:58] Status: recv=20 valid=16 invalid=4 sent=16 errors=0 reconnects=0
11:56:59 [DEBUG] MQTT message on mission/drone/1/command: {"cmd":"land"}
11:56:59 [INFO] Forwarded to drone: {'ts_ms': 1762588619659, 'cmd': 'land', 'params': {}}
[2025-11-08 11:57:03] Status: recv=21 valid=17 invalid=4 sent=17 errors=0 reconnects=0
11:57:03 [DEBUG] MQTT message on mission/drone/1/command: {"cmd":"disarm"}
11:57:03 [INFO] Forwarded to drone: {'ts_ms': 1762588623938, 'cmd': 'disarm', 'params': {}}
[2025-11-08 11:57:08] Status: recv=22 valid=18 invalid=4 sent=18 errors=0 reconnects=0
[2025-11-08 11:57:13] Status: recv=22 valid=18 invalid=4 sent=18 errors=0 reconnects=0
[2025-11-08 11:57:18] Status: recv=22 valid=18 invalid=4 sent=18 errors=0 reconnects=0
[2025-11-08 11:57:23] Status: recv=22 valid=18 invalid=4 sent=18 errors=0 reconnects=0
[2025-11-08 11:57:28] Status: recv=22 valid=18 invalid=4 sent=18 errors=0 reconnects=0
[2025-11-08 11:57:33] Status: recv=22 valid=18 invalid=4 sent=18 errors=0 reconnects=0
[2025-11-08 11:57:38] Status: recv=22 valid=18 invalid=4 sent=18 errors=0 reconnects=0
11:57:42 [INFO] Received signal 15, shutting down ...
Exception in thread paho-mqtt-client-illuminate-bridge-1762588453:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.11/3.11.11/Frameworks/Python.framework/Versions/3.11/lib/python3.11/threading.py", line 1045, in _bootstrap_inner
    self.run()
  File "/opt/homebrew/Cellar/python@3.11/3.11.11/Frameworks/Python.framework/Versions/3.11/lib/python3.11/threading.py", line 982, in run
    self._target(*self._args, **self._kwargs)
  File "/opt/homebrew/lib/python3.11/site-packages/paho/mqtt/client.py", line 4523, in _thread_main
    self.loop_forever(retry_first_connection=True)
  File "/opt/homebrew/lib/python3.11/site-packages/paho/mqtt/client.py", line 2297, in loop_forever
    rc = self._loop(timeout)
         ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/paho/mqtt/client.py", line 1686, in _loop
    rc = self.loop_read()
         ^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/paho/mqtt/client.py", line 2102, in loop_read
    return self._loop_rc_handle(rc)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/lib/python3.11/site-packages/paho/mqtt/client.py", line 3047, in _loop_rc_handle
    self._do_on_disconnect(packet_from_broker=False, v1_rc=rc)
  File "/opt/homebrew/lib/python3.11/site-packages/paho/mqtt/client.py", line 4383, in _do_on_disconnect
    on_disconnect(
TypeError: Bridge.on_disconnect() takes from 4 to 5 positional arguments but 6 were given
11:57:42 [INFO] Bridge stopped.
11:57:42 [INFO] Bridge stopped.
